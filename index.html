<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>녹음기 데모 페이지</title>
    <link rel="stylesheet" href="./index.css">
</head>
<body>
    <div id="section">
        <h1>DEMO</h1>

        <div class="box">
            <h2>녹음기</h2>
            <span>
                <button 
                    data-src="./recorder/recorder.html" 
                    data-size="620,420"
                >
                    OPEN
                </button>
            </span>
        </div>
    
        <div class="box">
            <h2>
                학생상세정보 Recordings 탭 플레이어
            </h2>
            <span>
                <button 
                    data-src="./recorder/history.html" 
                    data-size="950,800"
                >
                    OPEN
                </button>
            </span>
        </div>
    </div>

    <!-- [D] 페이지 내 공통 레이어팝업 -->
    <div class="layer_message_popup">
        <div class="layer_inner">
            <div class="layer_container">
                <div class="layer_contents">
                    <div class="layer_title">
                        <h2 class="layer_h2">알림</h2>
                        <button class="layer_close"><span class="hidden">닫기</span></button>
                    </div>
                    <div class="layer_main"><p class="message_text"></p></div>
                    <div class="layer_btns">
                        <button type="button" class="layer_submit">확인</button>
                        <button type="button" class="layer_cancel">취소</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- // [D] 페이지 내 공통 레이어팝업 -->

    <script 
        src="https://code.jquery.com/jquery-1.12.4.min.js" 
        integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" 
        crossorigin="anonymous"
    ></script>
    <script src="./recorder/js/LayerMessageBox.js"></script>

<!-- TODO 팝업 테스트를 위한 코드들 -->
<script>
    $('#btn').on('click', function(){
        LayerMessageBox.open({
            type : 'alert'
        }, '녹음된 내용이 저장되지 않습니다.\n다시 녹음 할까요?', function(isState){
            if(!isState) return false;
        });
    });

    $('button:not(#btn)').on('click', function(){
        var popSrc = $(this).attr('data-src');
        var popSize = $(this).attr('data-size');
        var width = popSize.split(',')[0];
        var height = popSize.split(',')[1];

        setAlignCenter(width, height, popSrc);
    });

    function setAlignCenter(width, height, href) {
        var xPos = getXposition(width);
        var yPos = getYposition(height);

        window.open(href, '_blank', 'width=' + width + ', height=' + height + ', left=' + xPos + ', top=' + yPos + ', toolbars=no, resizable=yes, scrollbars=no, location=no');
    }

    function getXposition(width){
        return ((document.body.clientWidth / 2) - (width / 2)) + window.screenLeft;
    }

    function getYposition(height){
        return ((screen.availHeight / 2) - (height / 2)) +  window.screenTop;
    }
</script>
<!-- // TODO 팝업 테스트를 위한 코드들 -->
</body>
</html>