<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>녹음 기록 확인</title>

    <link rel="stylesheet" type="text/css" href="../assets/css/LayerMessageBox.css">
    <link rel="stylesheet" type="text/css" href="../assets/css/AudioRecorder.css">
    <link rel="stylesheet" type="text/css" href="./history.css">

</head>
<body>
    <!-- TODO LSCH-17 : 플레이어 영역 -->
            <!-- [D] data-src에 오디오 링크 추가 -->
            <div class="sound_player ui_box student_recordings" data-src="../recorder/sample/audio1.mp3">
                <h3 class="hidden">플레이어</h3>

                <div class="ui_box_inner">
                    <div class="controls_wrap">
                        <div class="control_btns">
                            <button type="button" class="btns_bg btn_play">
                                <span class="hidden">재생 버튼</span>
                            </button>
                            <button type="button" class="btns_bg btn_stop" disabled>
                                <span class="hidden">정지 버튼</span>
                            </button>
                        </div>

                        <div class="ui_status_bar">
                            <div class="current_time">00:00</div>
                            <div class="status_bar">
                                <span class="playing">
                                    <span class="status_pointer"></span>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- // TODO LSCH-17 : 플레이어 영역 -->

            
<!-- TODO LSCH-17 : 녹음기 스크립트 코드 -->
<script src="../assets/js/libs/CheckBrowser-2.0.2.js"></script>
<script src="../assets/js/libs/utils.StringUtil.js"></script>
<script src="../assets/js/Player.js"></script>
<script src="../assets/js/ProgressBar.js"></script>
<script src="../assets/js/PlayerManager.js"></script>

<!-- TODO 녹음기 사용 참고 예시 코드 입니다. ====================== -->
<script language="javascript">
	'use strict';	    

    var $element = $('.sound_player');
    var players;
    var playerArr = [];

    // 오디오 init
    $.each($element, function(_, obj){
        players = new AudioPlayerManager().init({ element : obj });
        playerArr.push(players);
	});

	$(document).on(PM_CYCLE.RESUME, function(e, player){
		var isPlaying = !player.audio.paused;

		playerArr.map(function(el){
			// 재생 버튼
			if(isPlaying){
				if(el.player.audio.paused) enabledButton(el);
				
			// 일시정지, 정지 버튼
            }else{
                disabledButton(el);
            }
        });
	});

	$(document).on(PM_CYCLE.STOP, function(e, player){
		playerArr.map(function(el){
			disabledButton(el);
		});
	});

	function enabledButton(el){
		el.player.eventDisabled(true);
		el.playBtn.attr('disabled', true);
		el.stopBtn.attr('disabled', true);
	}

	function disabledButton(el){
		el.player.eventDisabled(false);
		el.playBtn.attr('disabled', false);

		if(el.player.audio.currentTime > 0){
			el.stopBtn.attr('disabled', false);

		}else{
			el.stopBtn.attr('disabled', true);
		}
	}
</script>
<!-- // TODO 녹음기 사용 참고 예시 코드 입니다. ====================== -->

</body>
</html>